<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.js" type="text/javascript"></script>
	<script src="jquery.json-2.3.min.js" type="text/javascript"></script>
	<script src="jstorage.js_4.js" type="text/javascript"></script>
	<script type="text/javascript">jQuery.noConflict();</script>
	<script src="eurekaKit-event.js" type="text/javascript"></script>
	<script src="eurekaKit-requests.js" type="text/javascript"></script>
	<script src="eurekaKit-services.js" type="text/javascript"></script>
	<style>
		div[id="status"] {
		  width: 10px;
		  height: 10px;
		  padding: 5px;
		  margin: 5px;
		  background-color: green;
		}
		
		div[id="results"] {
		  width: auto;
		  height: 100px;
		  overflow: auto;
		  padding: 5px;
		  margin: 5px;
		  border: 1px solid #333;
		}
	</style>
	
</head>
<body>
	<script type="text/javascript">
		
		//generic test methods.
		var success = function (data)
		{
			jQuery("#results").text(jQuery.toJSON(data));
		};
		
		var fail = function(data)
		{
			alert("Error!!" + data.toString());
		};
		
		var beforeServerCall = function(data)
		{
			jQuery("#status").css("background-color","red");
		};
		
		var afterServerCall = function(data)
		{
			jQuery("#status").css("background-color","green");
		};
		
		//button methods.
		function getSystemSettings()
		{			
			theService.getSystemSettings.execute(null, {noUpdate:true});
		}	
		
		function getActivityById()
		{
			theService.getActivityById.execute(jQuery("input[name='activityIdTextBox']").val(), null);
		}
		
		function clearCache()
		{			
			jQuery.jStorage.flush();
		}	
		
		//create the service.
		//var theService = EurekaKit.ServiceFactory.createService();
		var theService = EurekaKit.Services.testService()
				
		//set up observers for service calls.
		theService.getSystemSettings.observe(success, fail);	
		theService.getSystemSettings.observeServerCallStatus(beforeServerCall, afterServerCall);
			
			
		theService.getActivityById.observe(success, fail);
		theService.getActivityById.observeServerCallStatus(beforeServerCall, afterServerCall);
			
		
	</script>
	<div id="results" onclick="jQuery('#results').text('');">click to clear</div>
	<input type="button" name="ssbutton" onclick="getSystemSettings()" value="getSystemSettings" /><br/>
	<input type="button" name="gaibutton" onclick="getActivityById(2)" value="getActivityById" />
	<input type="text" name="activityIdTextBox"  /><br/><br/>
	<input type="button" name="clear cache" onclick="clearCache()" value="clear cache" /><br/><br/>
	<div id="status"></div>Green = idle, Red = async call
</body>

</html>